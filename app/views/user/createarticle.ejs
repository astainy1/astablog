<!-- Header starts here -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Linking external custom style sheet -->
  <link rel="stylesheet" href="../css/main.css" />
  <!-- Linking external custom style sheet -->

  <link rel="stylesheet" href="../css/bootstrap-5.1.3-dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/summernote-0.9.0-dist/summernote-lite.min.css">

  <!-- Font Awesome icon link -->
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" /> -->

  <link rel="stylesheet" href="../css/fontawesome-free-6.6.0-web/css/all.min.css" />

  <title>
    <%= title %>
  </title>

  <style>
    html,
    body {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
      outline: none;
      border: none;
      /* overflow: hidden; */
      position: relative;
      font-family: 'Open Sans', sans;
    }

    :root {
      --background-btn: linear-gradient(to right, #ff105f, #ff00a6);
    }

    .main-container {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      width: 100%;
      /* overflow: hidden; */
      gap: 1rem;
      /* background: red; */
      padding: 0;
    }

    .note-editor {

      display: block;
      width: 80%;

    }

    /* Header style start here */
    header {
      width: 100%;
      position: relative;
    }

    header .nav-container {
      background: #000;
      position: sticky;
      top: 0;
      z-index: 95;
      width: 100%;
      border-bottom: 3px solid #ff0084;
    }

    .header-menu {
      width: 80%;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      padding: 0.8rem;
    }

    header .header-menu ul {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
    }

    header .header-menu ul li {
      font-size: 1.3rem;
      list-style-type: none;
      margin: 0 5px;
      padding: 7px;
      border-radius: 5px;
      cursor: pointer;
      transition: .5s;
    }

    header nav .header-info .fa {
      margin-right: 5px;
    }

    header .header-menu ul li a {
      transition: .5s;
      text-decoration: none;
      color: #fff;
    }

    .header-account-detail li {
      font-weight: 600;
      transition: all 0.8s;
    }

    .header-account-detail #active {
      border: 1.5px solid #ff105f;
    }

    .header-account-detail li:hover {
      background: var(--background-btn);
      transform: translateY(-3px);
    }

    /* Navigation for logged in screen */

    .drop-down-items {
      position: absolute;
      top: 90px;
      right: 8%;
      display: none;
      justify-content: space-between;
      flex-direction: column;
      background: #f7f7f7;
      color: #000;
      width: 180px;
      box-shadow: 0.2em 0.2em 0.2em 0.1em rgba(0, 0, 0, 0.02),
        -0.2em -0em 0.1em 0.1em rgba(0, 0, 0, 0.01);
      z-index: 100;
      border-radius: 5px;
      height: auto;
      padding: 15px 10px;
      transition: all 0.5s;
      overflow: hidden;
    }

    .drop-down-items li {
      list-style-type: none;
    }

    .drop-down-items li a {
      display: block;
      /* width: 100%; */
      text-decoration: none;
      color: #000;
      padding: 7px 20px;
      font-size: 1.2rem;
    }

    .drop-down-items li a:hover {
      background: var(--background-btn);
      color: #fff;
    }

    header nav .header-info .logo-white img {
      width: 100px;
      height: auto;
      padding: none;
    }

    header nav .header-info .logo-white {
      padding: none;
    }

    .user-dropdown-menu {
      background: #b2b1b1;
      position: absolute;
      right: 20;
      top: 80%;
      display: flex;
      flex-direction: column;
    }

    .header-info {
      font-weight: 300;
      color: #fff;
    }

    .header-info li a:hover {
      color: #b2b1b1;
    }

    header .header-image-container {
      position: relative;
      background-image: linear-gradient(to right, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0.7));
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      object-fit: cover;
      height: auto;
      min-height: 30vh;
      border-bottom-right-radius: 4%;
      border-bottom-left-radius: 4%;
      transition: all 0.3s ease;
      /* overflow: hidden; */
    }

    header .header-image-container img {
      position: sticky;
      top: 0;
      object-fit: cover;
      display: block;
      width: 100%;
      height: 400px;
      transition: all 0.5s;
      z-index: -1;
      border-bottom-right-radius: 4%;
      border-bottom-left-radius: 4%;
    }

    header .header-image-container:hover {
      background-image: linear-gradient(to left, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7));
    }

    header .header-title {
      position: absolute;
      top: 14%;
      left: 13%;
      z-index: 50;
      color: #fff;
      padding: 3rem 0;
    }

    header .header-title h1 {
      font-weight: 400;
      font-size: 1.7rem;
      padding: 20px 0;
      color: #fa699a;
    }

    header .header-title h1 {
      font-weight: 700;
      font-size: 6rem;
      width: 80%;

    }

    .editor-form-container .heading {
      font-size: 2rem;
      color: #000;
    }

    /* Header style ends here */

    .main-content-container {
      /* position: relative;
      display: flex; */
      /* justify-content: center;
      flex-direction: row-reverse; */
      /* width: 100%; */
      /* height: auto;
      overflow: hidden; */
      gap: 2.3rem;
      margin: 5rem auto;
      /* flex-wrap: wrap-reverse; */
      background: #fff;
    }

    .editor-form-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      gap: 2em;
      overflow: hidden;
      width: 100%;
    }

    .editor-form-container #publist-article-btn {
      display: block;
      padding: 1rem;
      border: none;
      font-size: 1.2rem;
      align-self: end;
      cursor: pointer;
      background: var(--background-btn);
      color: #fff;
      border: 1.5px solid transparent;
      transition: 0.5s;
      border-radius: 5%;
    }

    .editor-form-container #publist-article-btn:hover {
      background: transparent;
      border: 1.4px solid #ff0084;
      color: #000;
    }

    .article-title-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      margin: 0 auto;
    }

    .editor-form-container .main-container .article-title-container #article-title {
      border: 1px solid #d8d7d7;
      border-radius: 1.2%;
      font-size: 2rem;
      resize: vertical;
      width: 80%;
      display: block;
    }

    textarea {
      width: 80%;
    }


    /* upload image container */
    .upload-article-image-container {
      /* background-image: linear-gradient(to right, #ff105f, #ff00a6); */
      background-image: url('../img/default_no_image1.jpeg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      object-fit: cover;
      /* background-attachment: fixed; */
      width: 80%;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      margin: 4rem auto;
      border: none;
    }

    .upload-article-image-container label {
      overflow: hidden;
      display: block;
      width: 100%;
      padding: none;
      border: none;
    }

    .upload-article-image-container label img {
      object-fit: cover;
      width: 100%;
      height: 510px;
    }

    .upload-article-image-container label:hover {
      cursor: pointer;
    }

    /* Footer style starts here */
    .scroll-top {
      position: fixed;
      right: 0;
      bottom: 0;
      margin: 7em;
      z-index: 98.2;
    }

    .top-btn {
      display: block;
      padding: 1em 1.2em;
      color: #000;
      text-decoration: none;
      background: rgb(208, 208, 208);
      border-radius: 5%;
      opacity: 0.7;
      transition: all 0.5s;
    }

    .scroll-top a:hover {
      opacity: 1;
    }

    footer {
      padding: 1rem;
      background: #000000;
      position: fixed;
      bottom: 0;
      width: 100%;
      color: #dedede;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    footer .copyright-text a,
    footer .icons a {
      color: #dedede;
      text-decoration: none;
    }

    footer .icons a {
      margin-left: 20px;
    }

    footer .icons a .fa-brands:hover {
      transition: all 0.5s;
      color: #ff00a6;
      transform: rotate(-30deg);
    }

    /* Footer style ends here */
  </style>

<body style="background: #f9f9f9;">
  <section class="main-container" id=":?top">
    <header>
      <section class="nav-container">
        <nav class="header-menu">
          <ul class="header-info">

            <li class="logo-white">
              <img src="../img/logo/logo-white.png" alt="logo" />
            </li>
          </ul>
          <ul class="header-account-detail">
            <section class="menu-large">
              <li><a href="/home">Home</a></li> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
              <li class="drop-down-menu" id="show-menu-btn">
                <a id="register-top-btn">
                  <%= userInfo %> &nbsp; <i class="fa fa-caret-down "></i>
                </a>
              </li>
            </section>

            <li class="drop-down-menu" id="mobile-menu-btn">
              <a id="open-menu-btn" class="fa fa-bars"></a>
            </li>
          </ul>
        </nav>
        <menu class="mobile-menu-container">
          <section class="close-menu" id="close-menu-btn">
            <span class="fa fa-times"></span>
          </section>
          <ul>
            <li>
              <a href="/home">Home</a>
            </li>
            <li>
              <a href="/user/profile">Profile</a>
            </li>
            <li>
              <a href="/create/article">Write</a>
            </li>
            <li>
              <a href="/login">Logout</a>
            </li>
          </ul>
        </menu>
      </section>
      <ul class="drop-down-items" id="menu">
        <li>
          <a href="/user/profile">Profile</a>
        </li>
        <li>
          <a href="/create/article">Write</a>
        </li>
        <li>
          <a href="/login">Logout &rarr;</a>
        </li>
      </ul>

    </header>

  </section>

  <section class="main-content-container" style="background: #f9f9f9; padding: 0;">
    <!-- Sidebar content start -->

    <form class="editor-form-container" enctype="multipart/form-data" name="article_form">
      <h1 style="text-align: center;" class="heading"> Create Article</h1>
      <span style="color: red; text-align: center;font-size: 0.9rem;">
        <%= message %>
      </span>
      <section class="main-container">
        <section class="article-title-container">
          <textarea name="article_title" id="article-title" rows="2"
            placeholder="Write Article Title..."></textarea>
        </section>
        <section class="upload-article-image-container">

          <label for="article-image">
            <img id="image_proview">
            <input type="file" name="article_image" id="article-image" hidden>
          </label>

        </section>
        <textarea id="summernote" name="editordata"></textarea>
      </section>
      <section>
        <button type="submit" id="publist-article-btn">Publish &rarr;</button>
      </section>
    </form>
    <!-- <h1> Create Article</h1> -->
  </section>
  </section>

  <section style="margin-bottom: 10em; padding: 3em;"></section>
  <section class="scroll-top">
    <a href="#:?top" class="top-btn"> <span class="fa fa-arrow-up"></span></a>
  </section>
  <footer>
    <p class="copyright-text">
      &copy; Copyright All Right Reserved <span id="update-year"></span>, <a
        href="mailto:astainyharris1@gmail.com">astaBlog</a>
    </p>
    <p class="icons">
      <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
      <a href="#"><i class="fa-brands fa-instagram"></i></a>
      <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
    </p>
  </footer>

</body>
<script defer src="../js/main.js"></script>
<script src="../js/vendor/jquery/jquery.js"></script>

<!-- link bootstrap js -->
<script src="../css/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>

<!-- link summernote js -->
<script src="../css/summernote-0.9.0-dist/summernote-lite.min.js"></script>
<script>
  let imageFile = document.querySelector('#article-image');
  let imagePreview = document.querySelector('#image_proview');
  let openFile = document.querySelector('.open_file');

  // Set default image path
  const defaultImagePath = '../img/upload-icon.png';

  imageFile.addEventListener('change', () => {

    const file = imageFile.files;
    // console.log(file)
    if (file) {
      const readFile = new FileReader();
      readFile.onload = (e) => {
        imagePreview.setAttribute('src', e.target.result);
      }
      readFile.readAsDataURL(file[0])
    } else {
      imagePreview.src = defaultImagePath;
    }

  });

  // Optionally, set the default image initially if no image is selected
  // imagePreview.setAttribute('src', defaultImagePath);

</script>
<script>
  $(document).ready(function () {
    alert('Connect established!');
    $('#summernote').summernote({
      placeholder: 'Write Article here....',
      tabsize: 2,
      height: 300, // set editor height
      minHeight: null, // set minimum height of editor
      maxHeight: null, // set maximum height of editor
      focus: true, // set focus to editable area after initializing summernote
      toolbar: [
        ['style', ['style']],
        ['font', ['bold', 'underline', 'clear', 'italic']],
        ['color', ['color']],
        ['para', ['ul', 'ol', 'paragraph']],
        ['table', ['table']],
        ['insert', ['link', 'video']],
        ['view', ['fullscreen', 'codeview', 'help']]
      ]
    });
  });

  function showContent() {
    const content = $("#myeditor").summernote("code");
    $("#myContent").html(content);
  }
</script>

<script src="../js/vendor/jquery/jquery-validation-1.21.0/dist/jquery.validate.min.js"></script>

<script>
  $(function () {
    $("form[name='article_form']").validate({

      onkeyup: function (element) {
        var validator = this;
        setTimeout(function () {
          validator.element(element);
        }, 300); // Debounce input validation
      },

      // Specify validation logic
      rules: {

        editordata: "required",
        article_title: {
          required: true,
          maxlength: 150,
        },
      },

      // Specify validation error messages
      messages: {

        username: "This field is required.",
        editordata: "This field is required.",
      },
      // Make sure the form is submitted to the destination defined
      // in the "action" attribute of the form when valid
      submitHandler: function (form) {
        form.submit();
      },
    });
  });
</script>

</html>